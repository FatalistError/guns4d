<!DOCTYPE html>
<html lang="en">
<!-- Documentation generated by LuaDox: https://github.com/jtackaberry/luadox -->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>The basic structure - Guns4d</title>
	<link href="../prism.css?7653a2d" rel="stylesheet" />
    <link rel="stylesheet" href="../luadox.css?7653a2d" type="text/css">
    
</head>
<body class="manual-defining_guns">
<div class="topbar">
<div class="group one">
<div class="description"><span>Guns4d | The ultimate 3d gun mod.</span></div>
</div>
<div class="group two">
</div>
<div class="group three">
<div class="button iconleft"><a href="../manual/changelog.html" title="changelog"><img src="../img/i-left.svg?7653a2d" alt=""/><span>Previous</span></a></div>
<div class="button iconright"><a href="../class/gun.html" title="gun"><span>Next</span><img src="../img/i-right.svg?7653a2d" alt=""/></a></div>
</div>
</div>
<div class="sidebar">
<form action="../search.html">
<input class="search" name="q" type="search" placeholder="Search" />
</form>
<div class="sections">
<div class="heading">Contents</div>
<ul>
<li><a href="#the_basic_structure">The basic structure</a></li>
<li><a href="#ammunition">Ammunition</a></li>
<li><a href="#subclasses">Subclasses</a></li>
<li><a href="#adding_a_subclass_to_a_gun_after_construction">adding a subclass to a gun after construction</a></li>
</ul>
</div>
<div class="manual">
<div class="heading">Manual</div>
<ul>
<li><a href="../manual/changelog.html">changelog 1.3.0</a></li>
<li class="selected"><a href="../manual/defining_guns.html">The basic structure</a></li>
</ul>
</div>
<div class="classes">
<div class="heading">Classes</div>
<ul>
<li><a href="../class/gun.html">gun</a></li>
<li><a href="../class/player_model_handler.html">Player_model_handler.player_model_handler</a></li>
</ul>
</div>
<div class="modules">
<div class="heading">Modules</div>
<ul>
<li><a href="../module/misc_helpers.html">misc_helpers</a></li>
<li><a href="../module/play_sound.html">play_sound</a></li>
<li><a href="../module/Bullet_hole.html">Bullet_hole</a></li>
<li><a href="../module/Control_handler.html">Control_handler</a></li>
<li><a href="../module/Gun-methods.html">Gun-methods</a></li>
</ul>
</div>
</div>
<div class="body">
<div class="manual">

<h1 id="the_basic_structure">The basic structure
<a class="permalink" href="#the_basic_structure" title="Permalink to this definition">¶</a>
</h1>
<p>The appearance and handling of guns by default are defined by two table fields: their <a href="../class/gun.html#lvl1_fields.consts">consts</a> and their <a href="../class/gun.html#lvl1_fields.properties">properties</a>.
<a href="../class/gun.html#lvl1_fields.properties">properties</a> define nearly everything, from how a gun handles to how it looks, what model it uses, etc.
while <a href="../class/gun.html#lvl1_fields.consts">consts</a> define attributes that should never change, like bones within the gun, framerates,</p>
<p>wether the gun is allowed to have certain attributes at all. The other fields of the class define tracking variables or other important things for the internal workings.
There are essentially only 3 fields you must define to register a gun: <a href="../class/gun.html#gun.itemstring">itemstring</a>, <a href="../class/gun.html#gun.name">name</a>, and <a href="../class/gun.html#lvl1_fields.properties">properties</a>.
To hold the gun, the item defined in itemstring must actually exist, it will not automatically register. To have a functional gun however, more will need to be changed in terms of properties.
it's reccomended that you take a look at existing mods (like guns4d_pack_1) for guidance</p>
<p>Guns4d uses a class system for most moving parts- including the gun. New guns therefore are created with the :inherit(def) method,
where def is the definition of your new gun- or rather the changed parts of it. So to make a new gun you can run Guns4d.gun:inherit()
or you can do the same thing with a seperate class of weapons. Set name to &quot;__template&quot; for template classes of guns.</p>
<p>for properties: for tables where you wish to delete the parent class's fields altogether (since inheritence prevents this) you can set the field &quot;__replace_old_table=true&quot;
additionally</p>

<h1 id="ammunition">Ammunition
<a class="permalink" href="#ammunition" title="Permalink to this definition">¶</a>
</h1>
<p>Ammunition is currently self-defined. Ammo has its own attributes seperate from the gun. This will eventually be changed to where the ammunition can both have an effect on the gun
and the gun can have an effect on the ammunition.</p>

<h1 id="subclasses">Subclasses
<a class="permalink" href="#subclasses" title="Permalink to this definition">¶</a>
</h1>
<p>subclasses are classes which are defined in <code>properties.subclasses</code> (where they will be instantiated on construction of the instance).
The resulting instance will then be put (under the same name/index) into the gun instance's <code>subclass_instances</code> table which will then be iterated. If the subclass has an <code>update</code> field it will be called as a function. If the properties change and the subclass no longer exists, it will be destroyed. This is so that things like scopes or other subclasses can be removed automatically if they no longer are present.</p>

<h2 id="adding_a_subclass_to_a_gun_after_construction">adding a subclass to a gun after construction
<a class="permalink" href="#adding_a_subclass_to_a_gun_after_construction" title="Permalink to this definition">¶</a>
</h2>
<p>you should accomplish this using a <code>property_modifier</code>. To do so, simply add a function <code>function(gun)</code> to <code>property_modifier</code> (preferably under a name like <code>modname:modifier</code>).
The function should add a your class to `properties</p>

</div>
</div>
<script src="../prism.js?7653a2d"></script>
</body>
</html>